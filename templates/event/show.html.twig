{% extends "event/base.html.twig" %}

{% block body %}
    <h1>Event</h1>

    {% set url = absolute_url('event_show', event.rp) %}
    <img src="{{ qr_code_url(url) }}" />

    {% set filter = 'squared_thumbnail_medium' %}
    {% for submission in event.submissions %}
        {% set flysystemPath = submission.imageName %}
        {% set thumbUrl = flysystemPath | imagine_filter(filter)   %}
        <figure class="figure">
            <a href="{{ thumbUrl }}" target="_blank">
                <img src="{{ thumbUrl }}" class="figure-img img-fluid rounded" alt="{{ thumbUrl }}">
            </a>
            <figcaption class="figure-caption text-end">{{ filter }}
                <b>
                    {{ flysystemPath }}

                </b>
            </figcaption>
        </figure>

    {% endfor %}

    <a href="{{ path('submission_new', event.rp) }}">
        Submit a photo
    </a>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ event.id }}</td>
            </tr>
            <tr>
                <th>EventDate</th>
                <td>
                    {{ event.eventDate ? event.eventDate|date('Y-m-d H:i:s') : '' }}
                    {{ event.eventDate ? event.eventDate|ago }}
                </td>
            </tr>
            <tr>
                <th>Type</th>
                <td>{{ event.type }}</td>
            </tr>
            <tr>
                <th>Opponent</th>
                <td>{{ event.opponent }}</td>
            </tr>
            <tr>
                <th>Location</th>
                <td>{{ event.location }} / {{ event.location.name }}</td>
            </tr>
            <tr>
                <th>Score</th>
                <td>{{ event.score }}</td>
            </tr>
            <tr>
                <th>Summary</th>
                <td>{{ event.summary }}</td>
            </tr>
            <tr>
                <th>Sport</th>
                <td>{{ event.sport }}</td>
            </tr>
            <tr>
                <th>Section</th>
                <td>{{ event.section }}</td>
            </tr>
        </tbody>
    </table>

    <a class="btn btn-primary" href="{{ path('event_edit', event.rp) }}">edit</a>
    {{ include('event/_delete_form.html.twig') }}
{% endblock %}
